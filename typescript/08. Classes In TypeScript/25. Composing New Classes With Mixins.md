## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–∏–∫—Å–∏–Ω–æ–≤ –≤ TypeScript

### 1. –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å User

–ê–≤—Ç–æ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç —Å –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞:

```typescript
class User {
  constructor(public name: string) {}
}
```

**–ß—Ç–æ –∑–¥–µ—Å—å –µ—Å—Ç—å:**

- –û–¥–∏–Ω –ø—É–±–ª–∏—á–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ `name: string`

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∞ Constructor

–≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è —á–∞—Å—Ç—å –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –º–∏–∫—Å–∏–Ω–æ–≤:

```typescript
type Constructor = new (...args: any[]) => {};
```

**–†–∞–∑–±–µ—Ä–µ–º —ç—Ç–æ—Ç —Ç–∏–ø:**

- `new` - —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (–º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —Å `new`)
- `...args: any[]` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ª—é–±–æ–≥–æ —Ç–∏–ø–∞
- `=> {}` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç (—ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π, –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:**

```typescript
type Constructor = new (...args: any[]) => object;
```

### 3. –§—É–Ω–∫—Ü–∏—è-–º–∏–∫—Å–∏–Ω Timestamp

–í–æ—Ç —Å–µ—Ä–¥—Ü–µ –º–∏–∫—Å–∏–Ω–∞:

```typescript
function Timestamp<T extends Constructor>(Base: T) {
  return class extends Base {
    protected timestamp: Date = new Date();

    getTimestamp(): Date {
      return this.timestamp;
    }
  };
}
```

**–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä:**

#### –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```typescript
function Timestamp<T extends Constructor>(Base: T) {
```

- `T extends Constructor` - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ `Base` —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º –∫–ª–∞—Å—Å–∞
- `Base: T` - –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ö–æ—Ç–∏–º —Ä–∞—Å—à–∏—Ä–∏—Ç—å

#### –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –∫–ª–∞—Å—Å:

```typescript
return class extends Base {
  // –¥–æ–±–∞–≤–ª—è–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
};
```

- –°–æ–∑–¥–∞–µ—Ç –∞–Ω–æ–Ω–∏–º–Ω—ã–π –∫–ª–∞—Å—Å, –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π –æ—Ç `Base`
- –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –º–µ—Ç–æ–¥—ã

#### –î–æ–±–∞–≤–ª—è–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

```typescript
protected timestamp: Date = new Date();
getTimestamp(): Date {
    return this.timestamp;
}
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ —Å –º–∏–∫—Å–∏–Ω–æ–º

–í–æ—Ç –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∏–∫—Å–∏–Ω:

```typescript
class UserWithTimestamp extends Timestamp(User) {
  age: number;

  constructor(name: string, age: number) {
    super(name); // –í—ã–∑–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ User
    this.age = age;
  }

  displayInfo(): void {
    console.log(`Name: ${this.name}`);
    console.log(`Age: ${this.age}`);
    console.log(`Timestamp: ${this.getTimestamp()}`);
  }
}
```

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞:**

```typescript
class UserWithTimestamp extends Timestamp(User) {
```

- `Timestamp(User)` - –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏-–º–∏–∫—Å–∏–Ω–∞
- –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è

### 5. –ü–æ–ª–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

–î–∞–≤–∞–π—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

```
User (–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å)
    ‚Üì
Timestamp(User) (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞—Å—Å)
    ‚Üì
UserWithTimestamp (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `UserWithTimestamp` –∏–º–µ–µ—Ç:

- `name` –æ—Ç `User`
- `timestamp` –∏ `getTimestamp()` –æ—Ç –º–∏–∫—Å–∏–Ω–∞
- `age` –∏ `displayInfo()` –æ—Ç —Å–µ–±—è

### 6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞

```typescript
const user = new UserWithTimestamp("Alice", 30);
console.log(user);
user.displayInfo();
```

**–í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏:**

```
UserWithTimestamp {
  name: "Alice",
  timestamp: 2023-10-05T10:30:00.000Z, // —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞
  age: 30
}
Name: Alice
Age: 30
Timestamp: 2023-10-05T10:30:00.000Z
```

### 7. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

#### 1. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

```typescript
// –ü—Ä–∏–º–µ–Ω—è–µ–º –∫ —Ä–∞–∑–Ω—ã–º –∫–ª–∞—Å—Å–∞–º
class Book {
  constructor(public title: string) {}
}

class Product {
  constructor(public name: string, public price: number) {}
}

const BookWithTimestamp = Timestamp(Book);
const ProductWithTimestamp = Timestamp(Product);

const book = new BookWithTimestamp("TypeScript Guide");
const product = new ProductWithTimestamp("Laptop", 999);

console.log(book.getTimestamp()); // –†–∞–±–æ—Ç–∞–µ—Ç!
console.log(product.getTimestamp()); // –†–∞–±–æ—Ç–∞–µ—Ç!
```

#### 2. –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–∫—Å–∏–Ω–æ–≤

```typescript
// –°–æ–∑–¥–∞–µ–º –µ—â–µ –æ–¥–∏–Ω –º–∏–∫—Å–∏–Ω
function Loggable<T extends Constructor>(Base: T) {
  return class extends Base {
    log(message: string): void {
      console.log(`[LOG]: ${message}`);
    }
  };
}

// –ö–æ–º–±–∏–Ω–∏—Ä—É–µ–º –º–∏–∫—Å–∏–Ω—ã
class SuperUser extends Loggable(Timestamp(User)) {
  constructor(name: string) {
    super(name);
  }
}

const superUser = new SuperUser("Bob");
superUser.log("User created"); // –ò–∑ Loggable
console.log(superUser.getTimestamp()); // –ò–∑ Timestamp
```

### 8. –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ Constructor

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π —Ç–∏–ø?**

```typescript
type Constructor = new (...args: any[]) => {};
```

- `new` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤
- `...args: any[]` - –ª—é–±–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
- `=> {}` - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç

**–ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π –≤–∞—Ä–∏–∞–Ω—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**

```typescript
type Constructor<T = {}> = new (...args: any[]) => T;
```

### 9. –ö–∞–∫ TypeScript –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –≤ –º–∏–∫—Å–∏–Ω–µ:

```typescript
function Timestamp<T extends Constructor>(Base: T) {
  return class extends Base {
    // this –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–µ–µ—Ç —Ç–∏–ø & T (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ)
    protected timestamp: Date = new Date();

    getTimestamp(): Date {
      return this.timestamp;
    }
  };
}
```

TypeScript –∑–Ω–∞–µ—Ç, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç:

- –í—Å–µ –º–µ—Ç–æ–¥—ã/—Å–≤–æ–π—Å—Ç–≤–∞ `T` (–±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞)
- –ü–ª—é—Å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã/—Å–≤–æ–π—Å—Ç–≤–∞

### 10. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

–ú–∏–∫—Å–∏–Ω—ã –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```typescript
function TimestampWithFormat<T extends Constructor>(
  Base: T,
  format: string = "ISO"
) {
  return class extends Base {
    protected timestamp: Date = new Date();

    getFormattedTimestamp(): string {
      if (format === "ISO") {
        return this.timestamp.toISOString();
      } else {
        return this.timestamp.toLocaleString();
      }
    }
  };
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
class UserWithFormattedTimestamp extends TimestampWithFormat(User, "locale") {
  // ...
}
```

### 11. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ID –∫–æ –≤—Å–µ–º —Å—É—â–Ω–æ—Å—Ç—è–º

```typescript
function WithAutoId<T extends Constructor>(Base: T) {
  return class extends Base {
    readonly id: string = Math.random().toString(36).substr(2, 9);
  };
}
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```typescript
function WithValidation<T extends Constructor>(Base: T) {
  return class extends Base {
    validate(): boolean {
      // –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      return true;
    }
  };
}
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```typescript
function WithHistory<T extends Constructor>(Base: T) {
  return class extends Base {
    private history: string[] = [];

    addToHistory(action: string): void {
      this.history.push(`${new Date().toISOString()}: ${action}`);
    }

    getHistory(): string[] {
      return [...this.history];
    }
  };
}
```

### 12. –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–∫—Å–∏–Ω–æ–≤

```typescript
// –°–æ–∑–¥–∞–µ–º "—Å—É–ø–µ—Ä-–∫–ª–∞—Å—Å" —Å–æ –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
class UltimateUser extends WithHistory(
  WithValidation(WithAutoId(Timestamp(User)))
) {
  constructor(name: string) {
    super(name);
  }
}

const ultimateUser = new UltimateUser("Charlie");
console.log(ultimateUser.id); // From WithAutoId
console.log(ultimateUser.getTimestamp()); // From Timestamp
ultimateUser.validate(); // From WithValidation
ultimateUser.addToHistory("created"); // From WithHistory
```

### 13. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞:

```typescript
// –ú–∏–∫—Å–∏–Ω—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è "–∏–∑–Ω—É—Ç—Ä–∏ –Ω–∞—Ä—É–∂—É"
class Example extends C(B(A(BaseClass))) {
  // –ü–æ—Ä–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è: A ‚Üí B ‚Üí C
}
```

#### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:

1. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –º–∏–∫—Å–∏–Ω—ã** - —á—Ç–æ –æ–Ω–∏ –¥–æ–±–∞–≤–ª—è—é—Ç
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞** –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏** –º–∏–∫—Å–∏–Ω–æ–≤
4. **–ò–∑–±–µ–≥–∞–π—Ç–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –º–µ–∂–¥—É –º–∏–∫—Å–∏–Ω–∞–º–∏

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:

1. **–ú–∏–∫—Å–∏–Ω—ã = —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ –∫–ª–∞—Å—Å—ã** - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω
2. **`Constructor` —Ç–∏–ø** - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É –≤–∞–ª–∏–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
3. **–ö–æ–º–ø–æ–∑–∏—Ü–∏—è —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π** - `C(B(A(Base)))`
4. **–ü–æ–ª–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - TypeScript –ø–æ–Ω–∏–º–∞–µ—Ç –≤—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
5. **–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–∏–∫—Å–∏–Ω–æ–≤

–ú–∏–∫—Å–∏–Ω—ã ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—å–Ω—ã—Ö, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ TypeScript! üöÄ
