### Общее введение

Автор обсуждает три фундаментальных концепции TypeScript: **аннотацию (annotation)**, **вывод (inference)** и **объявление (declaration)** типов, а также вводит понятие "утиной типизации".

---

### 1. Утиная типизация (Duck Typing)

**Определение утиной типизации:**

> "Если что-то выглядит как утка и крякает как утка, то это утка"

**Объяснение концепции:**

- TypeScript определяет тип значения на основе его **структуры и поведения**, а не только на основе явного указания типа
- Если значение ведет себя как строка (имеет методы строки, используется как строка), то TypeScript считает его строкой

**Пример из предыдущего урока:**

```typescript
type CustomString = string;
let firstName: CustomString = "Mark";
// TypeScript выводит тип как string, а не CustomString
```

**Почему это происходит:**

- TypeScript анализирует фактическое использование значения
- Поскольку `CustomString` в конечном счете является `string`, TypeScript показывает базовый тип для ясности
- Это демонстрирует принцип утиной типизации — значение "ведет себя" как строка

---

### 2. Три ключевых понятия TypeScript

#### A. Объявление типов (Declaration)

**Что это:** Создание пользовательских типов с помощью ключевого слова `type`

**Пример:**

```typescript
type CustomString = string; // Декларация типа
type User = {
  // Декларация сложного типа
  name: string;
  age: number;
};
```

**Характеристики:**

- Создание новых имен для типов
- Используется для сложных или часто используемых типов
- Ключевое слово: `type`

#### B. Аннотация типов (Annotation)

**Что это:** Явное указание типа для переменной, параметра функции или возвращаемого значения

**Пример:**

```typescript
let firstName: string = "John"; // Аннотация переменной
function greet(name: string): void {
  // Аннотация параметра и возвращаемого значения
  console.log(`Hello, ${name}`);
}
```

**Характеристики:**

- Ручное присвоение типа
- Используется, когда мы хотим явно указать тип
- Синтаксис: `:Type`

#### C. Вывод типов (Inference)

**Что это:** Автоматическое определение типа TypeScript на основе значения или контекста

**Пример:**

```typescript
let age = 30; // TypeScript ВЫВОДИТ тип number
let name = "John"; // TypeScript ВЫВОДИТ тип string

function addNumbers(a: number, b: number) {
  return a + b; // TypeScript ВЫВОДИТ, что возвращаемый тип number
}

let result = addNumbers(5, 10); // TypeScript ВЫВОДИТ, что result имеет тип number
```

**Характеристики:**

- TypeScript "догадывается" о типе
- Происходит автоматически
- Основан на значении или использовании

---

### 3. Практические примеры различий

**Пример с функцией:**

```typescript
// ДЕКЛАРАЦИЯ типа (создаем свой тип)
type NumberPair = [number, number];

// АННОТАЦИЯ параметров функции
function addNumbers(a: number, b: number): number {
  return a + b;
}

// ВЫВОД типа результата
let finalResult = addNumbers(10, 15); // TypeScript ВЫВОДИТ, что finalResult - number
```

---

### 4. Когда что использовать? Золотые правила

#### Когда использовать ДЕКЛАРАЦИЮ типов:

```typescript
// ✅ ХОРОШО - для сложных типов
type UserProfile = {
  id: number;
  name: string;
  email: string;
  preferences: string[];
};

// ❌ ПЛОХО - для простых типов
type MyString = string; // Излишне
```

#### Когда использовать АННОТАЦИЮ типов:

```typescript
// ✅ ХОРОШО - когда тип не очевиден
let data: string | null = null;

// ✅ ХОРОШО - параметры функций
function calculateTotal(price: number, quantity: number): number {
  return price * quantity;
}

// ❌ ПЛОХО - когда вывод очевиден
let name: string = "John"; // Излишне, TypeScript выведет сам
```

#### Когда полагаться на ВЫВОД типов:

```typescript
// ✅ ХОРОШО - когда тип очевиден
let count = 5; // TypeScript выведет number
let isActive = true; // TypeScript выведет boolean
let items = [1, 2, 3]; // TypeScript выведет number[]

// ✅ ХОРОШО - возвращаемые значения функций
function multiply(a: number, b: number) {
  return a * b; // TypeScript выведет number
}
```

---

### 5. Стратегия принятия решений

**Рекомендации автора:**

1. **Сложные типы** → Всегда объявляйте (declaration)
2. **Простые типы, которые нужно явно указать** → Аннотируйте (annotation)
3. **Простые случаи, где вывод надежен** → Доверяйте выводу TypeScript (inference)

**Практическое правило:**

> "Аннотируйте, когда это добавляет ясности; объявляйте, когда тип сложный; доверяйте выводу, когда он очевиден"

---

### Итог от автора

Автор подчеркивает:

1. **Утиная типизация** — философская основа того, как TypeScript определяет типы
2. **Декларация** — создание пользовательских типов для сложных структур
3. **Аннотация** — явное указание типа там, где это необходимо
4. **Вывод** — автоматическое определение типа TypeScript там, где это безопасно

### Мой итог как разработчика

Вы изучили ключевые концепции, которые определяют подход к типизации в TypeScript:

1. **Утиная типизация** — это не технический термин, а ментальная модель для понимания того, как TypeScript анализирует код.

2. **Три столба типизации:**

   - **Декларация** = "Я создаю новый тип"
   - **Аннотация** = "Я явно указываю тип"
   - **Вывод** = "TypeScript сам определяет тип"

3. **Практическая стратегия:**

   ```typescript
   // ДЕКЛАРАЦИЯ - для сложных структур
   type ApiResponse<T> = {
     data: T;
     status: "success" | "error";
     timestamp: Date;
   };

   // АННОТАЦИЯ - для ясности в неочевидных случаях
   let initialValue: number | null = null;

   // ВЫВОД - для очевидных случаев
   let userName = "Alice";
   let scores = [95, 87, 92];
   ```

4. **Ошибки новичков:**

   - Чрезмерная аннотация: `let x: number = 5;` (излишне)
   - Недостаточная декларация: использование сложных объектов без объявления типов
   - Недооценка вывода: ручное указание типов, которые TypeScript может вывести сам

5. **Профессиональный подход:**
   - Начинайте с вывода типов
   - Добавляйте аннотации там, где это улучшает читаемость
   - Создавайте декларации для сложных или часто используемых типов
   - Регулярно рефакторите, перемещая повторяющиеся аннотации в декларации

**Резюме:** Баланс между этими тремя подходами — ключ к написанию чистого, поддерживаемого TypeScript кода. TypeScript мощный инструмент, но он требует осознанного подхода к тому, когда и как использовать его возможности.
