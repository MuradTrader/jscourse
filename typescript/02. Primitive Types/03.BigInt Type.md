### Общее введение

Автор представляет `BigInt` — примитивный тип в TypeScript (и JavaScript), предназначенный для работы с очень большими целыми числами, которые выходят за пределы стандартного типа `number`.

---

### 1. Проблема: Максимальное безопасное целое число

**Что такое безопасное целое число?**
В JavaScript числа представлены в формате с плавающей запятой двойной точности (64-битный IEEE 754). Это означает, что существует предел целых чисел, которые могут быть точно представлены.

**Демонстрация проблемы:**

```typescript
const safeInt = Number.MAX_SAFE_INTEGER;
console.log(safeInt); // Выведет: 9007199254740991
```

- `Number.MAX_SAFE_INTEGER` — это константа, представляющая максимальное целое число, которое может быть точно представлено в JavaScript (2^53 - 1).
- Любые математические операции с числами, превышающими это значение, становятся **ненадежными**.

**Пример некорректных вычислений:**

```typescript
const safeIntPlusOne = safeInt + 1;
const safeIntPlusTwo = safeInt + 2;
console.log(safeIntPlusOne); // Может вывести 9007199254740992
console.log(safeIntPlusTwo); // Может вывести 9007199254740992 — то же значение!
```

Автор показывает, что при добавлении 1 и 2 к `MAX_SAFE_INTEGER` мы можем получить одинаковый результат. Это происходит потому, что JavaScript не может точно представить числа за этим пределом.

---

### 2. Решение: тип `BigInt`

**Для решения этой проблемы и был введен `BigInt`.**

#### Настройка TypeScript для работы с BigInt

**Важный момент:** `BigInt` был добавлен в стандарт ECMAScript 2020 (ES2020). Если в `tsconfig.json` указана более ранняя версия, TypeScript будет выдавать ошибку.

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020" // Минимум ES2020 для поддержки BigInt
  }
}
```

После изменения конфигурации нужно перезапустить компилятор TypeScript.

---

### 3. Создание значений BigInt

Есть **два основных способа** создать значение типа `BigInt`:

**1. Через конструктор `BigInt()`:**

```typescript
let bigIntOne = BigInt(9007199254740991);
```

- Конструктор принимает числовое значение или строку, представляющую большое число.
- TypeScript корректно выводит тип `bigint`.

**2. Через литерал с суффиксом `n`:**

```typescript
let bigIntTwo: bigint = 9007199254740991n;
```

- Это более краткий и удобный синтаксис.
- Обратите внимание на суффикс `n` в конце числа.

**Вывод в консоль:**

```typescript
console.log(bigIntOne); // Выведет: 9007199254740991n
```

Значения `BigInt` всегда выводятся с суффиксом `n`.

---

### 4. Особенности и ограничения BigInt

#### А. Выражения с BigInt

```typescript
let difference = bigIntOne - bigIntTwo;
```

Любое выражение, использующее значения `BigInt`, будет возвращать результат типа `bigint`.

#### Б. Только целые числа

```typescript
let e: bigint = BigInt(3.14); // ОШИБКА!
```

- `BigInt` может представлять **только целые числа**.
- Попытка создать `BigInt` из числа с плавающей точкой вызовет ошибку TypeScript (и ошибку времени выполнения в JavaScript).

#### В. Несовместимость с Number

```typescript
console.log(Math.log(bigIntOne)); // ОШИБКА!
```

- `BigInt` и `number` — это **разные примитивные типы**.
- Функции, ожидающие `number` (например, все методы объекта `Math`), не могут принимать `BigInt`.
- TypeScript предотвращает эту ошибку на этапе компиляции с сообщением: "Argument of type 'bigint' is not assignable to parameter of type 'number'".

---

### Итог от автора

Автор подчеркивает, что `BigInt` — это отдельный примитивный тип, предназначенный для работы с очень большими целыми числами. Он несовместим с типом `number` и имеет свои особенности использования.

### Мой итог как разработчика

Вы изучили важный примитивный тип, который решает конкретную проблему JavaScript:

1. **Проблема:** Тип `number` в JavaScript имеет ограничение `Number.MAX_SAFE_INTEGER` (≈ 9 квадриллионов), за которым вычисления становятся неточными.

2. **Решение:** `BigInt` позволяет работать с целыми числами произвольной величины.

3. **Создание BigInt:**

   - Через конструктор: `BigInt(123)`
   - Через литерал: `123n`

4. **Важные ограничения:**

   - Работает только с целыми числами
   - Несовместим с типом `number` и функциями, ожидающими `number`
   - Требует целевой версии ES2020 или выше в настройках TypeScript

5. **Типизация в TypeScript:** TypeScript имеет встроенный тип `bigint` для аннотаций и корректно выводит его для выражений с `BigInt`.

**Практический совет:** Используйте `BigInt` в следующих сценариях:

- Финансовые расчеты с очень большими суммами
- Научные вычисления, требующие высокой точности
- Работа с уникальными идентификаторами (ID), которые превышают `Number.MAX_SAFE_INTEGER`
- Криптографические операции

Для большинства повседневных задач достаточно стандартного типа `number`, но теперь вы знаете инструмент для работы с экстремально большими числами.
