### Подробное объяснение текста от автора курса

**Текст:**
"Continuing with our previous lecture, we will look at the lib property in this video. The lib property over here is closely related to the target of JavaScript that you choose. Based on the value of target. TypeScript automatically chooses the libraries that it will include as dependencies."

**Объяснение:**
Автор представляет опцию **`lib`**, которая тесно связана с изученной ранее опцией `target`.

**Ключевое понятие:** "libraries" (библиотеки) в контексте TypeScript — это не сторонние npm-пакеты, а **файлы объявлений типов (declaration files)**, которые описывают TypeScript'у, какие встроенные JavaScript API доступны и какие у них типы.

Когда вы устанавливаете `target`, TypeScript автоматически подключает соответствующие библиотеки типов для этой версии JavaScript.

---

**Текст:**
"Let me explain what I mean by libraries over here. Let's open our app.ts file and write some simple TypeScript code. This is simple JavaScript where I'm just selecting a button from Dom. But if you think of it, how does TypeScript know about the document object? How does it know that it exists? Why does it not complain?"

**Объяснение:**
Автор задает фундаментальный вопрос: **откуда TypeScript знает о существовании глобальных объектов типа `document`?**

В чистом JavaScript эти объекты предоставляются средой выполнения (браузером), но TypeScript — это статический анализатор, который работает до запуска кода. Ему нужны заранее определенные описания этих API.

---

**Текст:**
"This is because in our TS config file, we have the target selected to ES 2016, and Dom is automatically included by TypeScript as a dependency If within my tsconfig file, I uncomment the lib property and leave it as an empty array, it will now mean that no library is included by TypeScript and our code will throw an error."

**Объяснение:**
Автор проводит решающий эксперимент:

1.  **По умолчанию:** При `target: "ES2016"` TypeScript автоматически включает библиотеку `"DOM"`, которая содержит типы для `document`, `window`, `console` и других браузерных API.

2.  **При явном указании `lib: []`:** Мы говорим TypeScript: "не подключай никакие библиотеки типов автоматически". В этом случае TypeScript не знает о существовании `document` и выдает ошибку.

Это демонстрирует, что TypeScript по умолчанию предполагает, что вы работаете в браузерной среде.

---

**Текст:**
"If you go back to the TypeScript documentation and within our target, we select this lib link. Over here you will see that TypeScript clearly defines that which libraries are included along with which target values."

**Объяснение:**
Автор отсылает к официальной документации, где четко прописано соответствие между `target` и автоматически подключаемыми библиотеками.

**Важное правило:** Когда `lib` не указана явно, TypeScript включает:

- Библиотеки, соответствующие выбранному `target` (например, `ES2016`)
- Библиотеки для окружения, которое он предполагает (обычно `"DOM"` для браузера)

---

**Текст:**
"It further goes to state that TypeScript also includes APIs for newer JavaScript features matching the target you specify. For example, definition of map is available if target is set to ES6 or newer"

**Объяснение:**
Здесь автор объясняет вторую важную функцию библиотек типов. Они содержат не только типы для браузерных API, но и для **встроенных JavaScript объектов**.

**Конкретный пример:** Объект `Map` был добавлен в ES6. Если вы установите `target: "ES5"`, TypeScript все равно будет знать о типе `Map`, но при компиляции преобразует его в код, совместимый с ES5 (если возможно), или выдаст ошибку, если вы попытаетесь использовать `Map` в среде, которая его не поддерживает.

---

**Текст:**
"So which target you should use? Also highly depends on the JavaScript functionality that you're trying to use. So the libraries that are included by TypeScript depend on the target of JavaScript that you choose."

**Объяснение:**
Автор подчеркивает взаимосвязь: выбор `target` влияет на то, какие современные JavaScript функции будут доступны через библиотеки типов, даже если ваш код компилируется в старую версию JavaScript.

---

### Практические примеры из реальных проектов

**Текст:**
"Let's look at node. So we have node 17 over here. Let's open the ts config file and have a look. You will see that node 17 supports ES 2022. Hence the target is set to ES 2022. But over here, node goes ahead and explicitly defines the lib property and just sets it to ES 2022. So that means it does not include any of the Dom elements, because if you think of it, node JS runs on the server side and within the node JS environment, and it does not require the document library."

**Объяснение:**
Автор показывает разницу между браузерной и серверной разработкой на практическом примере из tsconfig/bases:

- **Node.js 17:** `target: "ES2022"`, `lib: ["ES2022"]`
- **Зачем явно указывать `lib`?** Чтобы исключить библиотеку `"DOM"`, которая не нужна в Node.js. В серверной среде нет `document`, `window` и других браузерных API.

---

**Текст:**
"Similarly, if you go back and have a look at React.js. Using Create React app and open the Tsconfig file. For this, you will see that Reactjs uses a target of ES5. That's because many browsers might not support ES6 features, and react explicitly includes the Dom, Dom, iterable, and ES next libraries, which it depends upon."

**Объяснение:**
А теперь пример для браузерной разработки:

- **Create React App:** `target: "ES5"`, но с явным указанием `lib: ["DOM", "DOM.Iterable", "ESNext"]`
- **Почему так?** Хотя целевая версия ES5 для совместимости, React явно подключает:
  - `"DOM"` — типы для браузерных API
  - `"DOM.Iterable"` — возможность использовать `for...of` с DOM коллекциями
  - `"ESNext"` — типы для самых современных JavaScript функций (даже тех, что еще не в стандарте)

---

### Резюме от вашего "профессионального разработчика":

Вы изучили одну из самых важных концепций TypeScript — систему предоставления типов для встроенных API.

**Ключевые выводы:**

1.  **`lib` управляет доступностью глобальных типов:** Она определяет, знает ли TypeScript о `document`, `Map`, `Promise`, `console` и других встроенных объектах.

2.  **Автоматическое поведение vs явный контроль:**

    - **По умолчанию:** TypeScript подключает библиотеки на основе `target` + предполагает браузерное окружение
    - **Явное указание `lib`:** Вы получаете полный контроль, но должны самостоятельно указать все необходимые библиотеки

3.  **Разные окружения — разные библиотеки:**

    - **Браузер:** Нужна `"DOM"`
    - **Node.js:** Нужны только стандартные библиотеки JavaScript (`"ES2022"` и т.д.)
    - **React:** Комбинация браузерных и современных JavaScript библиотек

4.  **Практическая рекомендация:** Используйте готовые конфигурации из tsconfig/bases для вашего фреймворка или среды выполнения. Это избавит вас от необходимости вручную подбирать правильные библиотеки.

Теперь вы понимаете, почему ваш TypeScript-код "знает" о существовании встроенных JavaScript объектов, и как управлять этим знанием в разных средах выполнения. В следующем видео автор перейдет к опциям строгой проверки типов!
